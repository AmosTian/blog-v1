---
sort: 2
---

# 深圳中电电力

TCP三次握手四次挥手

>   握手过程

1.  客户端给服务端发一个SYN报文，并指明客户端的初始序列号

    首部同步位SYN=1，初始序列号seq=x

2.  服务端接收到客户端的SYN报文后，会以自己的SYN报文作为应答，并且指定了自己的初始化序列号

    同时将客户端的初始序列号+1作为确认号ack的值，表明自己接收到了客户端的SYN同步报文

    确认报文中：SYN=1，ACK=1，确认号ack=x+1，初始序列号seq=y

3.  客户端接收到SYN报文后，会发送一个ACK报文，将服务器的初始序列号+1作为确认号ack值，表示收到了服务端的SYN报文

    确认报文中：SYN=1，ACK=1，确认号ack=y+1，seq=x+1

此时双方建立连接

>   为什么要三次握手？

为了完成真正的可靠传输，三次握手确保双方确认自己与对方的发送与接收都是正常的。

第一次握手：

服务端确认对方正常发送，自己接收正常

第二次握手：

客户端确认自己发送、接收正常，对方发送、接收正常；

第三次握手：

客户端确认自己发送、接收正常，对方发送、接收正常；服务端确认了自己发送、接收正常，对方发送、接收正常

>   四次挥手

TCP的半关闭状态，连接的一端在结束发送后还可以接收另一端的数据。

任何一方都可以在数据传送结束后发出连接释放的通知，待对方确认后进入半关闭状态。当另一方也没有数据发送时，发出连接释放通知，对方确认后完全关闭了TCP连接

假设客户端先发起关闭请求

1.  客户端发送 ==FIN报文== ，报文中指定序列号。客户端处于 `FIN_WAIT1` 状态

    发出  ==连接释放报文段(FIN=1,seq=u)==  后，客户端停止发送数据，主动关闭TCP连接，进入 `FIN_WAIT1(终止等待1) `   状态， 等待服务端确认

2.  服务端接收到 ==FIN报文== 后，发送 ==ACK确认报文段 (ACK=1，确认号ack=u+1，序号seq=v)==，表明已经接收到客户端的报文,此时服务端进入 `CLOSE_WAIT(关闭等待)` 状态。

    TCP处于半关闭状态，客户端到服务端的连接释放。

    客户端接收到服务端的确认后，进入 `FIN_WAIN2(终止等待2)` 状态，等待服务端发送的 ==FIN报文段==。
    
3.  如果服务端也要断开连接，发送 ==FIN 报文(FIN=1,ACK=1 ,seq=w,ack=u+1)== 。服务器处于 `LAST_ACK(最后确认)` 状态,等待客户端的确认

4.  客户端收到 ==FIN报文== 后，发送一个 ==确认报文段(ACK=1,seq=u+1,ack=w+1)== 作为应答，此时客户端处于 `TIME_WAIT(时间等待)` 状态。过一段时间确保服务端收到自己的ACK报文后，才真正关闭连接。客户端才进入 `CLOSED` 状态。

>   2MSL

为了保证客户端最后发送的ACK段能够到达服务器。若这个ACK丢失，处于 `LAST_ACK` 状态的服务器接收不到对==FIN报文段== 的确认报文。服务器会超时重传这个 ==FIN报文段== ，接着客户端在重新传一次 ==ACK报文段== ，重新启动 时间等待计时器。

用于重发可能丢失的ACK报文段

 [(2条消息) 面试官，不要再问我三次握手和四次挥手_猿人谷-CSDN博客](https://yuanrengu.blog.csdn.net/article/details/102366854?utm_medium=distribute.pc_relevant.none-task-blog-2~default~BlogCommendFromMachineLearnPai2~default-1.control&depth_1-utm_source=distribute.pc_relevant.none-task-blog-2~default~BlogCommendFromMachineLearnPai2~default-1.control)

[(2条消息) 两张动图-彻底明白TCP的三次握手与四次挥手_qzcsu的博客-CSDN博客_三次握手四次挥手详解](https://blog.csdn.net/qzcsu/article/details/72861891)



说一下HTTP协议

1.  浏览器向 DNS 服务器请求解析该 URL 中的域名所对应的 IP 地址;
2.  解析出 IP 地址后，根据该 IP 地址和默认端口 80，和服务器建立TCP连接;
3.  浏览器发出读取文件(URL 中域名后面部分对应的文件)的HTTP 请求，该请求报文作为 TCP 三次握手的第三个报文的数据发送给服务器;
4.  服务器对浏览器请求作出响应，并把对应的 html 文本发送给浏览器;
5.  释放 TCP连接;
6.  浏览器将该 html 文本并显示内容; 　



运输层

TCP：面向连接的可靠数据传输服务

UDP：无连接的最大努力交付的数据传输服务



并行和并发的区别：

并发是一段时间内宏观上多个程序同时运行；

并行是在同一时刻，真正有多个程序在同时运行

并发是一个时间段内同一处理机上有多个程序处于启动状态

并行是CPU的多个核心同时运行多个不同的进程



Java三大特性

列举多态的具体示例



MVC页面重定向